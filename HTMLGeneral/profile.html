<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Profile - ROBLOX</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="header-container"></div>
  <div id="wrap">
    <div id="sidebar-container"></div>


    <main class="content">
      <!-- Profile header -->
      <div class="profile-header">
        <div class="profile-avatar">Avatar</div>
        <div class="profile-info" id="PlayerProfile">
          <h1 id="PlayerName">ClassicUser123</h1>
          <div class="meta" id="CreationDate">Member since: March 2011</div>
          <div class="badges" id="BadgeCont">
            <div class="badge">OBC</div>
            <div class="badge">Founder</div>
          </div>
        </div>
      </div>

      <!-- Stats -->
      <div class="profile-stats">
        <div class="stat-box">
          <h3>Friends</h3>
          <p>52</p>
        </div>
        <div class="stat-box">
          <h3>Groups</h3>
          <p>8</p>
        </div>
      </div>

      <!-- Optional profile description -->
      <div class="profile-desc" id="AboutMe">
        <strong>About Me:</strong> Just a classic ROBLOX fan who loves building games and exploring new worlds.
      </div>
      <!-- Groups section -->
      <div class="profile-groups">
        <h3>Groups</h3>
        <div class="group-list-container">
          <div class="group-box">
            <img src="images/buildersclub.png" alt="Builders Club" class="group-icon">
            <span>Builders Club</span>
          </div>
          <div class="group-box">
            <img src="images/gamedevs.png" alt="Game Devs" class="group-icon">
            <span>Game Devs</span>
          </div>
          <div class="group-box">
            <img src="images/friendsclub.png" alt="Friends Club" class="group-icon">
            <span>Friends Club</span>
          </div>
          <div class="group-box">
            <img src="images/adventuregamers.png" alt="Adventure Gamers" class="group-icon">
            <span>Adventure Gamers</span>
          </div>
        </div>
      </div>
  </div>
  </main>

  <!-- Groups section -->

  </div>

  <div id="footer-container"></div>

  <script>
    // URL to your public SiteSources folder
    const BASE_URL = "http://192.168.87.101:3000/SiteSources/";
    const PBASE_URL = "http://192.168.87.101:3000/PlayerSources/";
    console.log("ExtraData is:", window.EXTRA_DATA);

    // Fetch sidebar HTML and inject
    fetch(BASE_URL + "sidebar.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("sidebar-container").innerHTML = html;
      })
      .catch(err => console.error("Error loading sidebar:", err));
    fetch(BASE_URL + "Header.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("header-container").innerHTML = html;
      })
      .catch(err => console.error("Error loading header:", err));
    fetch(BASE_URL + "Footer.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("footer-container").innerHTML = html;
      })
      .catch(err => console.error("Error loading header:", err));
    if (window.EXTRA_DATA !== "ND") {
      let ED = window.EXTRA_DATA;
      let parts = ED.split(",");
      let PD = parts[0];
      PD = PD.split("=")[1];
      fetch(PBASE_URL + PD + ".json")
        .then(res => {
          if (!res.ok) console.log("WAUGH");
          return res.json();
        })
        .then(PDAT => {
          console.log("PDAT: ", PDAT);
          document.getElementById("PlayerName").innerText = PDAT.Name
          let creationdate = PDAT.CreationDate.split(":")
          let month = creationdate[1]
          if (month === "01") month = "January";
          if (month === "02") month = "Febuary";
          if (month === "03") month = "March";
          if (month === "04") month = "April";
          if (month === "05") month = "May";
          if (month === "06") month = "June";
          if (month === "07") month = "July";
          if (month === "08") month = "August";
          if (month === "09") month = "September";
          if (month === "10") month = "October";
          if (month === "11") month = "November";
          if (month === "12") month = "December";
          let year = creationdate[0]
          let day = creationdate[2]
          document.getElementById("CreationDate").innerText = "Member Since: " + month + " " + day + ", " + year
          document.getElementById("AboutMe").innerHTML = "<strong>About me:</strong> " + PDAT.AboutMe


          let badgeContainer = document.getElementById("BadgeCont");
          badgeContainer.innerHTML = ""; // clear old badges
          if (PDAT.Badges && PDAT.Badges.length > 0) {
            let PCON = document.getElementById("PlayerProfile")
            if (PDAT.Badges.includes("Staff") || PDAT.Badges.includes("FF")) {
              PCON.className = "profile-info-staff"
            } else if (PDAT.Badges.includes("CC-YT")) {
              PCON.className = "profile-info-cc-yt"
            } else if (PDAT.Badges.includes("CC-TW")) {
              PCON.className = "profile-info-cc-tw"
            } else if (PDAT.Badges.includes("FC1")) {
              PCON.className = "profile-info-bf"
            } else if (PDAT.Badges.includes("FC2")) {
              PCON.className = "profile-info-sf"
            } else if (PDAT.Badges.includes("FC3")) {
              PCON.className = "profile-info-gf"
            } else {
              PCON.className = "profile-info"
            }
            PDAT.Badges.forEach(badge => {
              let div = document.createElement("div")
              let badgeclass = "badge";
              if (badge === "BC3") badgeclass = "badge-obc";
              if (badge === "BC2") badgeclass = "badge-tbc";
              if (badge === "BC1") badgeclass = "badge-bc";
              if (badge === "FC3") badgeclass = "badge-goldfounder";
              if (badge === "FC2") badgeclass = "badge-silvfounder";
              if (badge === "FC1") badgeclass = "badge-bronfounder";
              if (badge === "FF") badgeclass = "badge-family";
              if (badge === "CC-YT") badgeclass = "badge-cc-yt";
              if (badge === "CC-TW") badgeclass = "badge-cc-tw";
              div.className = badgeclass;
              let badgename = badge
              if (badgename === "BC3") badgename = "OBC";
              if (badgename === "BC2") badgename = "TBC";
              if (badgename === "BC1") badgename = "BC";
              if (badgename === "FC3") badgename = "GOLD FOUNDER";
              if (badgename === "FC2") badgename = "SILVER FOUNDER";
              if (badgename === "FC1") badgename = "BRONZE FOUNDER";
              if (badgename === "FF") badgename = "FOUNDER FAMILY";
              if (badgename === "CC-YT") badgename = "CONTENT CREATOR";
              if (badgename === "CC-TW") badgename = "CONTENT CREATOR";
              div.innerText = badgename;
              badgeContainer.appendChild(div);
            });
          }
        })

    }
  </script>
</body>

</html>
